# Ralph Progress Log
Started: Sun Feb  1 10:55:03 PM CST 2026
---

## Codebase Patterns
- Level-up flow in CharacterSheetPage uses pendingLevelUp state to track multi-step modals
- Class features are defined in src/data/classes.ts with optional expertiseGrant field
- Skill type includes optional expertiseSource field for tracking origin of expertise

---

## 2026-02-01 - US-001 through US-005 (Skill Expertise Feature)

### US-001: Define expertise-granting features with metadata
- Added ExpertiseGrant interface to types/index.ts
- Added expertiseGrant field to ClassFeature type
- Updated class features for Bard (L2, L9), Ranger (L2, L9), Rogue (L1, L6), Wizard (L2)
- Files: src/types/index.ts, src/data/classes.ts

### US-002: Add expertise toggle to character sheet
- Changed proficiency indicator from span to button for proficient skills
- Click toggles expertise on/off with immediate save
- Added expertiseSource field to Skill type
- Files: src/pages/CharacterSheetPage.tsx, src/types/index.ts

### US-003: Create ExpertisePickerModal component
- New modal for selecting expertise skills during level-up
- Shows proficient skills without existing expertise
- Displays current and preview bonus with expertise
- Files: src/components/ExpertisePickerModal.tsx

### US-004: Integrate expertise picker into level-up flow
- Modified handleLevelUpHPConfirm, handleASIConfirm, handleLevelUpSpellsConfirm
- Check for expertise-granting features and show picker if needed
- Support multiple expertise grants in sequence
- Files: src/pages/CharacterSheetPage.tsx

### US-005: Add expertise source tracking with tooltip
- Track expertiseSource when expertise is set
- Display source in tooltip on hover
- Files: src/pages/CharacterSheetPage.tsx

**Learnings for future iterations:**
- The level-up flow uses a chain of modal handlers with pendingLevelUp state
- ClassFeature interface can be extended with optional fields for new functionality
- Skills are stored in character.skills array with name, proficient, expertise, expertiseSource

---
