# Ralph Progress Log
Started: Sun Feb  1 04:01:39 PM CST 2026
---

## Codebase Patterns
- Typecheck uses `npx tsc -b` (no `npm run typecheck` script)
- Pre-existing lint errors in DiceRoller.tsx and DarkModeContext.tsx are unrelated to new work
- Types are centralized in `src/types/index.ts`
- Species data is in `src/data/species.ts` with its own Species interface that imports from types

---

## 2026-02-01 - US-001
- What was implemented: Species Ancestry Type System
  - Added `SpeciesAncestryOption` interface with: name, description, damageResistance?, damageType?, breathWeaponShape?, spells?, abilities?
  - Added `SpeciesAncestryData` interface with: choiceName, options array
  - Added optional `ancestry?: SpeciesAncestryData` to Species interface in species.ts
  - Added `speciesAncestry?: { choiceName: string, selectedOption: string }` to Character interface
  - Added `damageResistances?: string[]` to Character interface
- Files changed:
  - src/types/index.ts
  - src/data/species.ts
- **Learnings for future iterations:**
  - Species interface is in src/data/species.ts, not in src/types/index.ts
  - Character interface is in src/types/index.ts
  - SpeciesAncestryData is imported into species.ts from types
---

## 2026-02-01 - US-002
- What was implemented: Dragonborn Ancestry Data
  - Added ancestry data to Dragonborn species with choiceName 'Draconic Ancestry'
  - Added all 10 dragon type options: Black, Blue, Brass, Bronze, Copper, Gold, Green, Red, Silver, White
  - Each option includes: damageType, breathWeaponShape, damageResistance, and description
  - Line dragons (Black, Blue, Brass, Bronze, Copper) use '30-foot line'
  - Cone dragons (Gold, Green, Red, Silver, White) use '15-foot cone'
- Files changed:
  - src/data/species.ts
- **Learnings for future iterations:**
  - Ancestry data structure uses SpeciesAncestryOption for each option
  - breathWeaponShape can be either '30-foot line' or '15-foot cone' per 2024 PHB
  - Chromatic dragons (Black, Blue, Green, Red, White) and metallic dragons (Brass, Bronze, Copper, Gold, Silver) all included
---

## 2026-02-01 - US-003
- What was implemented: Tiefling, Gnome, Goliath, and Aasimar Ancestry Data
  - Added Tiefling ancestry with choiceName 'Fiendish Legacy' and 3 options:
    - Abyssal: poison resistance, Poison Spray cantrip
    - Chthonic: necrotic resistance, Chill Touch cantrip
    - Infernal: fire resistance, Fire Bolt cantrip
  - Added Gnome ancestry with choiceName 'Gnomish Lineage' and 2 options:
    - Forest Gnome: Minor Illusion cantrip, Speak with Animals
    - Rock Gnome: Prestidigitation cantrip, Tinker ability
  - Added Goliath ancestry with choiceName 'Giant Ancestry' and 6 options:
    - Cloud: Misty Step as Bonus Action
    - Fire: fire resistance
    - Frost: cold resistance
    - Hill: Heroic Inspiration on Dash/Dodge
    - Stone: 15-foot Tremorsense
    - Storm: lightning and thunder resistance
  - Added Aasimar ancestry with choiceName 'Celestial Revelation' and 2 options:
    - Heavenly Wings: Fly Speed during transformation
    - Radiant Soul: Extra Radiant damage during transformation
- Files changed:
  - src/data/species.ts
- **Learnings for future iterations:**
  - Goliath Storm ancestry grants resistance to both lightning AND thunder, but SpeciesAncestryOption only supports single damageResistance - future stories need to handle multi-resistance
  - Some ancestries grant abilities (like Misty Step for Cloud Goliath) rather than resistances
  - Gnome ancestries use the `spells` field to track cantrips granted
---

## 2026-02-01 - US-004
- What was implemented: Ancestry Selection UI to Character Creation
  - Added `speciesAncestry` state to CharacterCreatePage.tsx
  - Added `handleSpeciesChange` function that resets ancestry when species changes
  - Computed `speciesData`, `ancestryOptions`, and `selectedAncestryOption` for easy access
  - Added ancestry dropdown that appears when selected species has ancestry data
  - Dropdown label uses the species ancestry `choiceName` (e.g., "Draconic Ancestry")
  - Shows description of selected ancestry option below the dropdown
  - Updated `isValid` check to require ancestry selection when species has ancestry
  - Included `speciesAncestry` in character data object when saving
- Files changed:
  - src/pages/CharacterCreatePage.tsx
- **Learnings for future iterations:**
  - `getSpeciesByName(species)` returns the Species object with ancestry data
  - Ancestry options are accessed via `speciesData.ancestry.options`
  - The `isValid` pattern allows easy composition with additional requirements
  - Species data also provides `speed` and `size` for character creation
---

## 2026-02-01 - US-005
- What was implemented: Apply Ancestry Mechanics to Character
  - Added `breathWeapon?: { damageType: string, shape: string }` to Character interface
  - In handleCreateCharacter, look up the selected ancestry option from speciesData
  - Build damageResistances array from ancestry's damageResistance field
  - Special case: Goliath Storm ancestry adds both 'lightning' and 'thunder' resistances
  - Build breathWeapon object for Dragonborn with damageType and shape from ancestry
  - Added damageResistances and breathWeapon to character data object when saving
- Files changed:
  - src/types/index.ts
  - src/pages/CharacterCreatePage.tsx
- **Learnings for future iterations:**
  - The ancestry mechanics are applied in handleCreateCharacter before building characterData
  - Goliath Storm is a special case requiring manual handling of dual resistances (SpeciesAncestryOption only has single damageResistance field)
  - breathWeapon data structure stores both damageType and shape for Dragonborn breath weapon display
---

## 2026-02-01 - US-006
- What was implemented: Display Ancestry on Character Sheet
  - Updated header to show ancestry in parentheses after species (e.g., "Dragonborn (Gold)")
  - Added "Ancestry Abilities" section before Species Traits with:
    - Damage Resistances display with green badges
    - Breath Weapon display for Dragonborn with damage type and shape
  - Section only appears if character has resistances or breath weapon
- Files changed:
  - src/pages/CharacterSheetPage.tsx
- **Learnings for future iterations:**
  - Character sheet uses conditional rendering to only show relevant sections
  - Use colored backgrounds (green for resistances, red for breath weapon) for visual differentiation
---

## 2026-02-01 - US-007 & US-008
- What was implemented: Divine Order and Primal Order Class Choices
  - Added ClassOrder interface and classOrders field to ClassData interface
  - Added classOrderName field for display label customization
  - Added Divine Order options to Cleric: Protector, Thaumaturge
  - Added Primal Order options to Druid: Magician, Warden
  - Added classOrder field to Character interface in types
  - Added classOrder state and UI in CharacterCreatePage
  - Class order selection required when class has orders
  - Class order saved to character data
- Files changed:
  - src/types/index.ts
  - src/data/classes.ts
  - src/pages/CharacterCreatePage.tsx
- **Learnings for future iterations:**
  - Use classOrderName to customize the dropdown label per class
  - Class orders follow similar pattern to species ancestry
  - handleClassChange resets classOrder along with other class-specific state
---
