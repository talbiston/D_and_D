{
  "project": "D&D Character Sheet",
  "branchName": "ralph/skill-expertise",
  "description": "Skill Expertise Selection - Add UI to select and manage skill expertise for features like Scholar, Expertise, and Deft Explorer",
  "userStories": [
    {
      "id": "US-001",
      "title": "Define expertise-granting features with metadata",
      "description": "As a developer, I need to define which class features grant expertise and what skill restrictions they have.",
      "acceptanceCriteria": [
        "Add optional `expertiseGrant` field to ClassFeature type: { count: number, skills?: SkillName[] }",
        "Update Scholar (Wizard L2): expertiseGrant: { count: 1, skills: ['arcana', 'history', 'investigation', 'medicine', 'nature', 'religion'] }",
        "Update Expertise (Rogue L1): expertiseGrant: { count: 2 }",
        "Update Expertise (Rogue L6): expertiseGrant: { count: 2 }",
        "Update Expertise (Bard L2): expertiseGrant: { count: 2 }",
        "Update Expertise (Bard L9): expertiseGrant: { count: 2 }",
        "Update Deft Explorer (Ranger L2): expertiseGrant: { count: 1 }",
        "Update Expertise (Ranger L9): expertiseGrant: { count: 2 }",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Add expertise toggle to character sheet skills section",
      "description": "As a player, I want to toggle expertise on my proficient skills from the character sheet so I can manage my expertise choices anytime.",
      "acceptanceCriteria": [
        "Each proficient skill row has a clickable expertise toggle (small button or checkbox)",
        "Non-proficient skills cannot have expertise toggled (toggle hidden or disabled)",
        "Clicking toggle sets skill.expertise = true/false and saves character",
        "Skill bonus display updates immediately when expertise is toggled",
        "Expertise toggle only appears for proficient skills",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Create ExpertisePickerModal component",
      "description": "As a player, I want a modal to select expertise skills when leveling up or when I need to choose multiple at once.",
      "acceptanceCriteria": [
        "Create ExpertisePickerModal component in src/components/",
        "Props: isOpen, onClose, onConfirm, title, availableSkills (SkillName[]), count (number to select), currentSkills (character's skills array)",
        "Shows only proficient skills from availableSkills that don't already have expertise",
        "Allows selecting exactly `count` skills",
        "Confirm button disabled until correct number selected",
        "Shows skill name and current bonus, plus preview bonus with expertise",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 3,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Integrate expertise picker into level-up flow",
      "description": "As a player, when I level up and gain a feature with expertiseGrant, I want to be prompted to select my expertise skills.",
      "acceptanceCriteria": [
        "During level-up in CharacterSheetPage, check if any new features have expertiseGrant",
        "If expertiseGrant found, show ExpertisePickerModal after other level-up modals",
        "Pass restricted skills from expertiseGrant.skills (or all proficient if not specified)",
        "Pass count from expertiseGrant.count",
        "On confirm, update character.skills with expertise: true for selected skills",
        "Add expertise choices to level-up summary",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 4,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Add expertise source tracking",
      "description": "As a player, I want to see which feature granted each expertise when I hover over the expertise indicator.",
      "acceptanceCriteria": [
        "Add optional expertiseSource?: string field to Skill type in types/index.ts",
        "When expertise is granted via level-up modal, set expertiseSource to feature name",
        "When expertise is toggled manually on character sheet, set expertiseSource to 'Manual'",
        "Add tooltip to expertise indicator showing the source (e.g., 'Expertise from: Scholar')",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 5,
      "passes": true,
      "notes": ""
    }
  ]
}
